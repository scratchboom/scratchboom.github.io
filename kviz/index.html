<!DOCTYPE html>
<html>

<head>
    <title>База ответов к игре Conquiztador</title>
    <script src="jquery.js"></script>
    <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <script src="data.js"></script>

    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
    <script type="text/javascript">stLight.options({publisher: "aebf553f-dc00-41f9-94b1-4779cfdfb7ca", doNotHash: true, doNotCopy: true, hashAddressBar: false});</script>


</head>

<body>

    <div class="row-fluid" style="text-align: center;">
        <div class="offset2 span8"><h3>База ответов к игре Conquiztador</h3></div>
    </div>

    <div class="row-fluid input-prepend">
            <button id="clearbtn" class="btn btn-primary offset2 span2">Очистить</button>
            <input id="searchbox" type="text" placeholder="Вводите вопрос прямо тут (можно вводить части слов)" class="span6"/>
    </div>

    <div class="row-fluid" >
        <div class="span12" class="span12" style="text-align: center;">
            <script type="text/javascript"><!--
                google_ad_client = "ca-pub-8096559251272323";
                /* quiz_search */
                google_ad_slot = "8343405499";
                google_ad_width = 728;
                google_ad_height = 90;
                //-->
            </script>
            <script type="text/javascript"
                    src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
            </script>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span12" style="text-align: center;">
            <span class='st_vkontakte_hcount' displayText='Vkontakte'></span>
            <span class='st_odnoklassniki_hcount' displayText='Odnoklassniki'></span>
            <span class='st_facebook_hcount' displayText='Facebook'></span>
            <span class='st_twitter_hcount' displayText='Tweet'></span>
            <span class='st_googleplus_hcount' displayText='Google +'></span>
        </div>
    </div>

    <div class="row-fluid">
        <div class="span8 offset2">
            <table id="answers" class="table table-striped table-bordered" style="display:none">
            </table>
        </div>
    </div>





<script>
    var clearCount = 0;

    function contains(string,str){
        return string.indexOf(str)!=-1;
    }

    function containsAll(string,strs){
        var res = true;

        for(var i=0; i < strs.length ; i++){
            res = res && contains(string,strs[i])
        }

        return res;
    }

    function search(strs){
        var res = [];
        for(var i=0;i < data.length;i++){
            if( containsAll(ldata[i].q , strs)){
                res.push(i);
            }
        }
        return res;
    }

    var searchbox = $("#searchbox");
    searchbox.focus();

    var clearbtn = $("#clearbtn");


    searchbox.keyup( function(){

        $("#answers").find("tr").remove();
        var strs = searchbox.val().toLowerCase().split(' ');

        var res = search(strs);
        if(res.length==0) $('#answers').hide();
        else $('#answers').show();

    for(var i=0;i < Math.min(res.length,5);i++){
    $('#answers').append("<tr><td>" +  data[res[i]].q  + "</td><td>" + data[res[i]].a + "</td></tr>");
    }

    });

    clearbtn.click(function() {
        searchbox.val("");
        $("#answers").hide();
        $("#answers").find("tr").remove();
        searchbox.focus();
        clearCount++;
        yaCounter21157444.reachGoal('CLICK_CLEAR');
        if(clearCount>=10 && clearCount%10==0){
            yaCounter21157444.reachGoal('CLEAR_REFRESH');
            location.reload();
        }
    });



</script>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
        (w[c] = w[c] || []).push(function() {
        try {
        w.yaCounter21157444 = new Ya.Metrika({id:21157444,
        webvisor:true,
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true});
        } catch(e) { }
        });

        var n = d.getElementsByTagName("script")[0],
        s = d.createElement("script"),
        f = function () { n.parentNode.insertBefore(s, n); };
        s.type = "text/javascript";
        s.async = true;
        s.src = (d.location.protocol == "https:" ? "https:" : "http:") + "//mc.yandex.ru/metrika/watch.js";

        if (w.opera == "[object Opera]") {
        d.addEventListener("DOMContentLoaded", f, false);
        } else { f(); }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="//mc.yandex.ru/watch/21157444" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->




</body>


</html>